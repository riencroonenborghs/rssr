<% if @read_later.valid? %>
  function readLaterReadIt () {
    const parent = document.getElementById("read-later-<%= @read_later.entry.id %>");
    const readLaterReadIt = parent.getElementsByClassName("read-later-read-it")[0];
    readLaterReadIt.classList.add("d-none");
    const readLater = parent.getElementsByClassName("read-later")[0];
    readLater.classList.remove("d-none");
  }

  function readLaterReadItAndDisable () {
    const parent = document.getElementById("read-later-<%= @read_later.entry.id %>");
    parent.classList.add("d-none");
    const wrapper = parent.closest(".entry-wrapper");
    wrapper.classList.add("disable");
  }

  function updateBadge () {
    const badge = document.getElementsByClassName("read-later-count-badge")[0];
    if (badge) {
      badge.innerHTML = "<%= @read_later_count %>";
      <% if @read_later_count.zero? %>
        badge.classList.add("d-none");
      <% end %>
    }
  }

  <% if @remove_from_list %>
    readLaterReadItAndDisable();
    updateBadge();
  <% else %>
    readLaterReadIt();
    updateBadge();
  <% end %>  
<% else %>
  function showMessage () {
    const alert = document.getElementById("async-flash-alert");
    const body = alert.getElementsByClassName("toast-body")[0];
    body.innerHTML = "<%= @subscription.errors.full_messages.to_sentence %>";
    alert.classList.add("show");
  }
  showMessage();
<% end %>